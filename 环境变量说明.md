# Vercel 环境变量配置说明

## 环境变量列表

### 当前项目环境变量

**无需设置任何环境变量** - 项目已配置为自动适应 Vercel 环境。

### 可选环境变量（如果需要自定义）

| 变量名 | 类型 | 必需 | 默认值 | 说明 |
|--------|------|------|--------|------|
| `PORT` | Number | ❌ | `3000` | 服务器端口（Vercel 自动分配，无需设置） |
| `NODE_ENV` | String | ❌ | `production` | 运行环境 |

## 在 Vercel 中设置环境变量

### 方法1：通过 Vercel 网站

1. 登录 Vercel 控制台
2. 选择你的项目
3. 进入 **Settings** > **Environment Variables**
4. 点击 **Add New**
5. 输入变量名和值
6. 选择环境（Production, Preview, Development）
7. 点击 **Save**

### 方法2：通过 Vercel CLI

```bash
# 设置环境变量
vercel env add PORT production
# 输入值：3000

# 查看环境变量
vercel env ls

# 删除环境变量
vercel env rm PORT production
```

### 方法3：使用 .env 文件（本地开发）

创建 `.env` 文件（已添加到 .gitignore）：

```env
PORT=3000
NODE_ENV=production
```

## 重要提示

### ⚠️ 数据存储问题

**Vercel 是无服务器平台，文件系统是只读的！**

当前代码使用 `fs.writeFileSync()` 保存数据到文件系统，这在 Vercel 上**无法工作**。

### 解决方案

如果需要保存数据，需要：

1. **使用 Vercel KV（键值存储）**
   - 在 Vercel 项目中创建 KV 数据库
   - Vercel 会自动提供环境变量：
     - `KV_REST_API_URL`
     - `KV_REST_API_TOKEN`

2. **使用外部数据库**
   - MongoDB Atlas
   - Supabase
   - PlanetScale
   - 或其他数据库服务

3. **仅前端部署**
   - 如果不需要保存数据
   - 可以只部署静态文件
   - 移除后端 API 功能

## 当前配置

项目已自动配置：
- ✅ API 地址自动适应（使用 `window.location.origin`）
- ✅ 端口自动从环境变量读取
- ✅ 无需手动设置环境变量即可部署

## 部署检查清单

- [ ] 代码已推送到 Git 仓库
- [ ] `vercel.json` 配置文件已创建
- [ ] API 地址已改为动态获取
- [ ] 如果使用数据库，已配置数据库环境变量
- [ ] 测试部署后的功能

## 部署命令

```bash
# 安装 Vercel CLI
npm install -g vercel

# 登录
vercel login

# 部署到预览环境
vercel

# 部署到生产环境
vercel --prod
```

